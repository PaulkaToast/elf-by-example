## Building Examples

This directory has a number of examples which illustrate various aspects of an
ELF file. To build these examples, use the `build_example.py` script present in
the root directory of this repository. For example, to build the `simple`
example, run the script as follows:

```
$> build_example.py --example=examples/simple
```

In general, one should specify the path to the directory in which the
example is present. Then, `build_example.py` will build the static-pie
flavor of the example using various combinations of _libc_s and linkers. The
resultant object files (`.o` files) and executables end up in the `out`
directory (present in the root directory.) For the `simple` example, the
generated files will be present in `out/examples/simple`. Running `ls -1` in
the `out/examples/simple` prints this:

```
simple.clang.glibc.ld
simple.clang.glibc.ld.lld
simple.clang.glibc.o
simple.clang.musl.ld
simple.clang.musl.ld.lld
simple.clang.musl.o
```

As you can see, each file has a number of suffixes. The first suffix indicates
the compiler used. In the above example, `clang` was the compiler used. The
next suffix indicates the libc the that was pointed at. For executables, the
last suffix indicates the linker that was used to build the example. [The files
ending in `.o` are the object files generated by the compiler.]

## Preparing a New Example

If the example is a C program, then all one needs to do is to prepare an
appropriate `main.c` file in the example directory. If the example needs special
compiler or linker flags, then one has to provide a `CONFIG.json` file in the
example directory. The special compiler and linker flags can be specified in the
JSON file as `CCFLAGS` and `LDFLAGS` attributes. One call also the list the
language, `C` or `C++`, as a `LANG` value in the JSON file. If `C++` is
specified as the language, then one has to prepare an appropriate `main.cc` file
instead of a `main.c` files. See `examples/global_instance/CONFIG.json` for an
example which uses these attributes in the `CONFIG.json` file.
